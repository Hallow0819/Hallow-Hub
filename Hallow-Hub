task.spawn(function()
    task.wait(2) -- Wait for the UI to finish loading
    
    local coreGui = game:GetService("CoreGui")
    local playerGui = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
    local mainFrame = nil

    -- Find the Main frame by searching for the Title
    for _, loc in pairs({coreGui, playerGui}) do
        for _, obj in pairs(loc:GetDescendants()) do
            if obj:IsA("TextLabel") and obj.Text == "Hallow Hub" then
                mainFrame = obj:FindFirstAncestor("Main")
                if mainFrame then break end
            end
        end
    end

    if mainFrame then
        -- 1. Create the Image at a high ZIndex to start
        local bg = Instance.new("ImageLabel")
        bg.Name = "HallowBG"
        bg.Parent = mainFrame
        bg.Size = UDim2.new(1, 0, 1, 0)
        bg.Position = UDim2.new(0, 0, 0, 0)
        bg.BackgroundTransparency = 1
        bg.Image = "rbxassetid://1322801390"
        bg.ImageTransparency = 0.4 -- Making it more visible for testing
        bg.ScaleType = Enum.ScaleType.Crop
        bg.ZIndex = 1 -- Put it behind the buttons (which are usually 2+)

        -- 2. THE BLOOM FIX: Make the internal background frames transparent
        -- Bloom uses several frames for its "glow" and "shadow"
        for _, child in pairs(mainFrame:GetDescendants()) do
            if child:IsA("Frame") and (child.Name == "Background" or child.Name == "Main") then
                child.BackgroundTransparency = 1
            end
        end

        -- 3. Round the corners
        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0, 9)
        corner.Parent = bg
        
        print("Hallow Hub: Background and Transparency applied.")
    end
end)
